- name: frontend playbook
  hosts: all
  tasks:
      
    - name: module disable nginx -y
      ansible.builtin.shell: dnf module disable nginx -y
  
    - name: module enable nginx -y
      ansible.builtin.shell: dnf module enable nginx:1.24 -y  
    
    - name: Remove file (delete file)
      ansible.builtin.file:
        path: /usr/share/nginx/html
        state: absent
  
    - name: cp -r nginx.conf /etc/nginx/nginx.conf
      ansible.builtin.copy:
        src: nginx.conf
        dest: /etc/nginx/nginx.conf
     
    - name: systemctl start nginx
      ansible.builtin.service:
        name: nginx
        state: started
        enabled: yes
   
    - name: Download frontend.zip
      ansible.builtin.get_url:
        url: curl -o /tmp/frontend.zip https://roboshop-artifacts.s3.amazonaws.com/frontend-v3.zip
        dest: /usr/share/nginx/html
        remote_src: yes
     
    - name: systemctl restart nginx
      ansible.builtin.service:
        name: nginx
        state: restarted
        enabled: yes
